(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-vipd"],{"007c":function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c7eb")),r=i(n("1da1"));n("e9c4"),n("d3b7"),n("159b"),n("14d9"),n("d401"),n("25f0");var d=i(n("4ad7")),o={data:function(){return{dbmc:"",ylx:0,dhsj:[],hhsj:[],ddh:"",uid:"",dz:"",hydzd:"",hyabid:"",bask:""}},onLoad:function(){var e=this,n=uni.getStorageSync("uid");if(n&&(e.uid=n,e.wl(n)),"undefined"!==typeof window.ethereum){var i=new d.default(window.ethereum);window.ethereum.enable().then((function(n){var a=n[0];e.dz=a,i.eth.getChainId().then((function(e){t("log","Chain ID:",e," at pages/index/vipd.vue:93")})).catch((function(e){t("error","Error getting chain ID:",e," at pages/index/vipd.vue:98")}))})).catch((function(e){t("error",e," at pages/index/vipd.vue:104")}))}else t("error","MetaMask is not installed. Please install MetaMask."," at pages/index/vipd.vue:108")},methods:{wl:function(){var t=this,e={uid:t.uid};uni.request({url:t.$url("cpd"),method:"POST",data:JSON.stringify(e),header:{"Content-Type":"application/json"},complete:function(e){var n=[],i=[];t.dbmc=e.data.dbmc,e.data.zf.hydz&&(t.hydzd=e.data.zf.hydz,t.hyabid=e.data.zf.hyabi,t.bask=e.data.zf.bask),e.data.cp.forEach((function(t,e){1==t.lx?n.push(t):2==t.lx&&i.push(t)})),t.dhsj=n,t.hhsj=i}})},xd:function(e,n,i,a){var r={ddh:e,uid:this.uid,je:n,lx:a+"",fds:i};uni.request({url:this.$url("xd"),method:"POST",data:JSON.stringify(r),header:{"Content-Type":"application/json"},complete:function(e){t("log",e," at pages/index/vipd.vue:157")}})},skd:function(e,n){var i={ddh:e,hx:n,uid:this.uid,lx:this.ylx};uni.request({url:this.$url("sk"),method:"POST",data:JSON.stringify(i),header:{"Content-Type":"application/json"},complete:function(e){t("log",e," at pages/index/vipd.vue:172"),1==e.data?uni.showToast({title:"成功",icon:"success"}):2==e.data&&uni.showToast({title:"失败",icon:"error"})}})},tokenTransfer:function(e){var n=this;return(0,r.default)((0,a.default)().mark((function i(){var r,o,u,s,c,l,p,h,v,f;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=n,o=r.hyabid,u=n.hydzd,s=n.dz,c=r.bask,l=new d.default(window.web3.currentProvider),p=new l.eth.Contract(JSON.parse(o),u),t("log",p,"合约方法"," at pages/index/vipd.vue:198"),p.methods.balanceOf(s).call().then((function(e){var n=l.utils.toBN(e),i=l.utils.fromWei(n,"ether");t("log","当前代币余额（以Ether为单位）:",i," at pages/index/vipd.vue:202")})),h=e.jg,v=l.utils.toWei(h.toString(),"ether"),l.eth.getAccounts((function(t,e){0!=e.length||alert("Please check if the wallet is unlocked")})),i.next=14,l.eth.getGasPrice();case 14:f=i.sent,t("log",f," at pages/index/vipd.vue:216"),(8e4*f/Math.pow(10,18)).toFixed(6),p.methods.transfer(c,v).send({from:s,gas:81e3,gasPrice:f},(function(i,a){var r=(new Date).getTime(),d=n.uid+r;t("log","订单号"+d," at pages/index/vipd.vue:229"),n.ddh=d,n.xd(d,e.jg,e.fds,e.lx),uni.showLoading({title:"加载中...",mask:!0}),t("log",i,a," at pages/index/vipd.vue:236"),i?(t("log","转账失败"," at pages/index/vipd.vue:240"),uni.hideLoading(),uni.showToast({title:"转账失败",icon:"error"})):t("log","转账hash",a," at pages/index/vipd.vue:238")})).then((function(e){t("log","转账结束",e.transactionHash," at pages/index/vipd.vue:248"),n.skd(n.ddh,e.transactionHash),uni.hideLoading()})).catch((function(e){t("log","转账取消"," at pages/index/vipd.vue:252"),uni.hideLoading(),uni.showToast({title:"交易取消",icon:"error"})}));case 18:case"end":return i.stop()}}),i)})))()},cz:function(t){this.ylx=t.lx,this.tokenTransfer(t)},dd:function(){uni.navigateTo({url:"./dd"})}}};e.default=o}).call(this,n("0de9")["log"])},"539a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticStyle:{width:"100%",height:"260rpx",background:"#333333"}},[i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"32rpx",color:"bisque","padding-top":"70rpx"}},[i("v-uni-view",{},[i("v-uni-image",{staticStyle:{width:"110rpx",height:"110rpx","vertical-align":"middle"},attrs:{src:n("6660"),mode:"aspectFill"}}),i("v-uni-text",[t._v("Member recharge zone")])],1)],1)],1),i("v-uni-view",{},[i("v-uni-view",{staticStyle:{width:"95%",margin:"0 auto","font-size":"30rpx","margin-top":"10rpx"}},[t._v("Recharge the answer points")]),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"95%",margin:"0 auto","flex-wrap":"wrap"}},t._l(t.dhsj,(function(e,n){return i("v-uni-view",{staticStyle:{width:"320rpx",height:"220rpx",background:"#F3F6F9",margin:"20rpx 0rpx 10rpx 0rpx","border-radius":"10rpx","font-size":"30rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cz(e)}}},[i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx","margin-top":"13rpx"}},[i("v-uni-text",{staticStyle:{"font-size":"40rpx","font-weight":"bold"}},[t._v(t._s(e.fds))]),t._v("Drop")],1),i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx",color:"brown"}},[t._v("Offer "+t._s(e.jg)+" "+t._s(t.dbmc))]),i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx","text-decoration":"line-through","font-size":"20rpx"}},[t._v("Price"+t._s(e.yj)+" "+t._s(t.dbmc))])],1)})),1)],1),i("v-uni-view",{},[i("v-uni-view",{staticStyle:{width:"95%",margin:"0 auto","font-size":"30rpx","margin-top":"10rpx"}},[t._v("Painting points recharge")]),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between",width:"95%",margin:"0 auto","flex-wrap":"wrap"}},t._l(t.hhsj,(function(e,n){return i("v-uni-view",{staticStyle:{width:"320rpx",height:"220rpx",background:"#F3F6F9",margin:"20rpx 0rpx 10rpx 0rpx","border-radius":"10rpx","font-size":"30rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cz(e)}}},[i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx","margin-top":"13rpx"}},[i("v-uni-text",{staticStyle:{"font-size":"40rpx","font-weight":"bold"}},[t._v(t._s(e.fds))]),t._v("Drop")],1),i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx",color:"brown"}},[t._v("Offer "+t._s(e.jg)+" "+t._s(t.dbmc))]),i("v-uni-view",{staticStyle:{"text-align":"center",padding:"10rpx","text-decoration":"line-through","font-size":"20rpx"}},[t._v("Price"+t._s(e.yj)+" "+t._s(t.dbmc))])],1)})),1)],1),i("v-uni-view",{staticStyle:{height:"30rpx"}})],1)},a=[]},6660:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAASFBMVEUAAADw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nw05nFiWlxAAAAF3RSTlMAoLOq9Bd7y+Fo2F8K670sk4lxS0M3UwYwejoAAAEvSURBVEjH7ZTbkoMgEEQRCaDi3eT8/59uaWUDuikd87Sp8rwoPTZgT4G6uLj4/4QhW2Fvcu/Ns8FMYnMJTa5f5BqMdO0cirUyQSnzWui3WgW5xDuC+6t2MAjCAhPe6A6OQ/PQvi3UcBOHZYxZtt/XxszPFsrDsLrna+GpF+V3ugL0nrdNw8rmlQagiqFVu5uuQzJwqiLtudtdusGnM+kHMKTlZsf8gCwxG8DGajGPdtDQRTPQJ97DuB30ibmLlVFwOhzYlzmL+l1ysoIH+zTnqybSSm6CZzt9mYgG7qJ7pF7coQgraRTeQmb7aTlPJ6QFpnWIgxJzJ/3FZolQzgSmjf3u1Cker7Zmsd1iKqhndw9anWYAH5SFRp1n9vkGnPqIHqAM6jPGXFt1cXHxLfwAxFEUh/Se5esAAAAASUVORK5CYII="},"926f":function(t,e,n){"use strict";n.r(e);var i=n("539a"),a=n("dff6");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var d=n("f0c5"),o=Object(d["a"])(a["default"],i["b"],i["c"],!1,null,"5cb809d6",null,!1,i["a"],void 0);e["default"]=o.exports},dff6:function(t,e,n){"use strict";n.r(e);var i=n("007c"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a}}]);