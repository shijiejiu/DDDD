import{g as e,r as t,a as n,c as a,h as s,n as i,e as l,f as r,w as o,i as p,j as d,l as u,m as c,p as y,F as h,q as m,u as f,t as g}from"./index-189aa70b.js";import{s as x}from"./index.0d33a5b6.js";import{_ as b}from"./vip.3648d2f2.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const T=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];const _=w({data:()=>({dhsj:[],hhsj:[],ddh:"",uid:"",dz:""}),onLoad(){let t=this;const n=e("uid");if(n&&(t.uid=n,t.wl(n)),void 0!==window.ethereum){const e=new x(window.ethereum);window.ethereum.enable().then((function(n){const a=n[0];t.dz=a,e.eth.getChainId().then((function(e){console.log("Chain ID:",e)})).catch((function(e){console.error("Error getting chain ID:",e)}))})).catch((function(e){console.error(e)}))}else console.error("MetaMask is not installed. Please install MetaMask.")},methods:{wl(){let e=this,n={uid:e.uid};t({url:"http://aii.nmall.vc/api/api.php?ym=cpd",method:"POST",data:JSON.stringify(n),header:{"Content-Type":"application/json"},complete:t=>{let n=[],a=[];console.log(t),t.data.forEach(((e,t)=>{1==e.lx?n.push(e):2==e.lx&&a.push(e)})),e.dhsj=n,e.hhsj=a}})},xd(e,n,a,s){let i={ddh:e,uid:this.uid,je:n,lx:s+"",fds:a};t({url:"http://aii.nmall.vc/api/api.php?ym=xd",method:"POST",data:JSON.stringify(i),header:{"Content-Type":"application/json"},complete:e=>{console.log(e)}})},skd(e,a){let s={ddh:e,hx:a,uid:this.uid};t({url:this.$url("sk"),method:"POST",data:JSON.stringify(s),header:{"Content-Type":"application/json"},complete:e=>{console.log(e),1==e.data?n({title:"成功",icon:"success"}):2==e.data&&n({title:"失败",icon:"error"})}})},async tokenTransfer(e){let t=this.dz,i=new x(window.web3.currentProvider);var l=new i.eth.Contract(T,"0xd777eA3eB8d07b1f6975a35Acf33B879a4CA4f1e");console.log(l,"合约方法"),l.methods.balanceOf(t).call().then((e=>{const t=i.utils.toBN(e),n=i.utils.fromWei(t,"ether");console.log("当前代币余额（以Ether为单位）:",n)}));const r=e.jg,o=i.utils.toWei(r.toString(),"ether");i.eth.getAccounts(((e,t)=>{0!=t.length||alert("Please check if the wallet is unlocked")}));let p=await i.eth.getGasPrice();console.log(p),(8e4*p/10**18).toFixed(6),l.methods.transfer("0x53F13971d372caB2C17072E0A7B0Fbc7181e5126",o).send({from:t,gas:81e3,gasPrice:p},((t,i)=>{let l=(new Date).getTime(),r=this.uid+l;console.log("订单号"+r),this.ddh=r,this.xd(r,e.jg,e.fds,e.lx),a({title:"加载中...",mask:!0}),console.log(t,i),t?(console.log("转账失败"),s(),n({title:"转账失败",icon:"error"})):console.log("转账hash",i)})).then((e=>{console.log("转账结束",e.transactionHash),this.skd(this.ddh,e.transactionHash),s()})).catch((e=>{console.log("转账取消"),s(),n({title:"交易取消",icon:"error"})}))},cz(e){this.tokenTransfer(e)},dd(){i({url:"./dd"})}}},[["render",function(e,t,n,a,s,i){const x=m,w=f,T=p;return l(),r(T,null,{default:o((()=>[d(T,{class:"",style:{width:"100%",height:"260rpx",background:"#333333"}},{default:o((()=>[d(T,{class:"",style:{display:"flex","justify-content":"space-between","font-size":"32rpx",color:"bisque","padding-top":"70rpx"}},{default:o((()=>[d(T,{class:""},{default:o((()=>[d(x,{style:{width:"110rpx",height:"110rpx","vertical-align":"middle"},src:b,mode:"aspectFill"}),d(w,null,{default:o((()=>[u("Member recharge zone")])),_:1})])),_:1})])),_:1})])),_:1}),d(T,{class:""},{default:o((()=>[d(T,{class:"",style:{width:"95%",margin:"0 auto","font-size":"30rpx","margin-top":"10rpx"}},{default:o((()=>[u(" Recharge the answer points ")])),_:1}),d(T,{class:"",style:{display:"flex","justify-content":"space-between",width:"95%",margin:"0 auto","flex-wrap":"wrap"}},{default:o((()=>[(l(!0),c(h,null,y(s.dhsj,((e,t)=>(l(),r(T,{class:"",style:{width:"320rpx",height:"220rpx",background:"#F3F6F9",margin:"20rpx 0rpx 10rpx 0rpx","border-radius":"10rpx","font-size":"30rpx"},onClick:t=>i.cz(e)},{default:o((()=>[d(T,{class:"",style:{"text-align":"center",padding:"10rpx","margin-top":"13rpx"}},{default:o((()=>[d(w,{style:{"font-size":"40rpx","font-weight":"bold"}},{default:o((()=>[u(g(e.fds),1)])),_:2},1024),u("Drop ")])),_:2},1024),d(T,{class:"",style:{"text-align":"center",padding:"10rpx",color:"brown"}},{default:o((()=>[u(" Offer "+g(e.jg)+" USDTD ",1)])),_:2},1024),d(T,{class:"",style:{"text-align":"center",padding:"10rpx","text-decoration":"line-through","font-size":"20rpx"}},{default:o((()=>[u(" Price"+g(e.yj)+" USDTD ",1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),d(T,{class:""},{default:o((()=>[d(T,{class:"",style:{width:"95%",margin:"0 auto","font-size":"30rpx","margin-top":"10rpx"}},{default:o((()=>[u(" Painting points recharge ")])),_:1}),d(T,{class:"",style:{display:"flex","justify-content":"space-between",width:"95%",margin:"0 auto","flex-wrap":"wrap"}},{default:o((()=>[(l(!0),c(h,null,y(s.hhsj,((e,t)=>(l(),r(T,{class:"",style:{width:"320rpx",height:"220rpx",background:"#F3F6F9",margin:"20rpx 0rpx 10rpx 0rpx","border-radius":"10rpx","font-size":"30rpx"},onClick:t=>i.cz(e)},{default:o((()=>[d(T,{class:"",style:{"text-align":"center",padding:"10rpx","margin-top":"13rpx"}},{default:o((()=>[d(w,{style:{"font-size":"40rpx","font-weight":"bold"}},{default:o((()=>[u(g(e.fds),1)])),_:2},1024),u("Drop ")])),_:2},1024),d(T,{class:"",style:{"text-align":"center",padding:"10rpx",color:"brown"}},{default:o((()=>[u(" Offer "+g(e.jg)+" USDTD ",1)])),_:2},1024),d(T,{class:"",style:{"text-align":"center",padding:"10rpx","text-decoration":"line-through","font-size":"20rpx"}},{default:o((()=>[u(" Price"+g(e.yj)+" USDTD ",1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),d(T,{class:"",style:{height:"30rpx"}})])),_:1})}]]);export{_ as default};
